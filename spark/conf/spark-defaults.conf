# Spark Configuration
spark.master                     spark://spark-master:7077
spark.app.name                   StrokePrediction
spark.executor.memory            2g
spark.executor.cores             2
spark.sql.adaptive.enabled       true
spark.serializer                 org.apache.spark.serializer.KryoSerializer
spark.jars                       /opt/jars/mongo-spark/mongo-spark-connector_2.12-10.2.1.jar,/opt/jars/mongo-spark/bson-4.11.1.jar,/opt/jars/mongo-spark/mongodb-driver-core-4.11.1.jar,/opt/jars/mongo-spark/mongodb-driver-sync-4.11.1.jar,/opt/jars/hadoop-aws/hadoop-aws-3.3.4.jar,/opt/jars/hadoop-aws/aws-java-sdk-bundle-1.12.262.jar

# Event logging settings
spark.eventLog.enabled           true
spark.eventLog.dir               /tmp/spark-events
spark.history.fs.logDirectory    /tmp/spark-events

# Fixed JMX exporter configuration (removed '=' and added proper syntax)
spark.driver.extraJavaOptions    -javaagent:/opt/jars/jmx-exporter/jmx_prometheus_javaagent-0.20.0.jar=7071:/opt/jars/jmx-exporter/config.yml
spark.executor.extraJavaOptions  -javaagent:/opt/jars/jmx-exporter/jmx_prometheus_javaagent-0.20.0.jar=7072:/opt/jars/jmx-exporter/config.yml

# MinIO / S3A settings
spark.hadoop.fs.s3a.endpoint                    http://stroke-minio:9000
spark.hadoop.fs.s3a.impl                        org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.path.style.access           true
spark.hadoop.fs.s3a.connection.ssl.enabled      false
spark.hadoop.fs.s3a.access.key                  admin
spark.hadoop.fs.s3a.secret.key                  password

# Performance tweaks
spark.hadoop.fs.s3a.connection.establish.timeout 5000
spark.hadoop.fs.s3a.connection.timeout          10000
